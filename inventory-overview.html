<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Roboto:wght@400;500;700&amp;family=Lexend:wght@400;500;700;900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<title>EasyStock Pro - Inventory Overview</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<style type="text/tailwindcss">
      :root {
        --primary-color: #197fe5;--blue-gray-50: #ECEFF1;
        --blue-gray-100: #CFD8DC;
        --blue-gray-200: #B0BEC5;
        --blue-gray-300: #90A4AE;
        --blue-gray-400: #78909C;
        --blue-gray-500: #607D8B;
        --blue-gray-600: #546E7A;
        --blue-gray-700: #455A64;
        --blue-gray-800: #37474F;
        --blue-gray-900: #263238;
      }
      body {
        font-family: 'Roboto', 'Lexend', sans-serif;
      }
      .material-icons {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        font-feature-settings: 'liga';
      }
      .bg-primary { background-color: var(--primary-color); }
      .text-primary { color: var(--primary-color); }
      .border-primary { border-color: var(--primary-color); }

      /* Animation classes */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }

      .animate-fadeIn {
        animation: fadeIn 0.3s ease-out;
      }

      .animate-spin {
        animation: spin 1s linear infinite;
      }

      /* Hover effects */
      .hover-scale:hover {
        transform: scale(1.05);
        transition: transform 0.2s ease;
      }

      /* Loading skeleton */
      .skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }

      /* Enhanced table interactions */
      .table-row-hover {
        transition: all 0.2s ease;
      }

      .table-row-hover:hover {
        background-color: var(--blue-gray-50);
        transform: scale(1.01);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

      /* Button interactions */
      .action-button {
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
      }

      .action-button:hover {
        transform: scale(1.1);
      }

      .action-button:active {
        transform: scale(0.95);
      }

      /* Pagination animations */
      .pagination-button {
        transition: all 0.3s ease;
      }

      .pagination-button:hover:not(:disabled) {
        background-color: var(--primary-color);
        color: white;
        transform: translateY(-2px);
      }

      /* Filter animations */
      .filter-container {
        transition: all 0.3s ease;
      }

      .filter-container:focus-within {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(25, 127, 229, 0.15);
      }

      /* Status badge animations */
      .status-badge {
        transition: all 0.2s ease;
        position: relative;
      }

      .status-badge:hover {
        transform: scale(1.05);
      }

      /* Search input enhancements */
      .search-input:focus {
        box-shadow: 0 0 0 3px rgba(25, 127, 229, 0.1);
        border-color: var(--primary-color);
      }[dir="rtl"] .text-left { text-align: right !important; }
      [dir="rtl"] .text-right { text-align: left !important; }
      [dir="rtl"] .pl-4 { padding-right: 1rem !important; padding-left: 0 !important; }
      [dir="rtl"] .pr-4 { padding-left: 1rem !important; padding-right: 0 !important; }
      [dir="rtl"] .pl-2 { padding-right: 0.5rem !important; padding-left: 0 !important; }
      [dir="rtl"] .pr-2 { padding-left: 0.5rem !important; padding-right: 0 !important; }
      [dir="rtl"] .rounded-l-lg { border-top-right-radius: 0.5rem !important; border-bottom-right-radius: 0.5rem !important; border-top-left-radius: 0 !important; border-bottom-left-radius: 0 !important; }
      [dir="rtl"] .rounded-r-lg { border-top-left-radius: 0.5rem !important; border-bottom-left-radius: 0.5rem !important; border-top-right-radius: 0 !important; border-bottom-right-radius: 0 !important; }
      [dir="rtl"] .border-l-0 { border-right-width: 0px !important; border-left-width: 1px !important; }
      [dir="rtl"] .border-r-0 { border-left-width: 0px !important; border-right-width: 1px !important; }
      [dir="rtl"] .gap-4 { gap: 1rem; }[dir="rtl"] .gap-8 { gap: 2rem; }
      [dir="rtl"] .gap-9 { gap: 2.25rem; }
      [dir="rtl"] .gap-x-2 > *:not(:last-child) { margin-left: 0.5rem; margin-right: 0; }[dir="rtl"] .gap-x-2 { flex-direction: row-reverse; }
      [dir="rtl"] .flex-row-reverse { flex-direction: row !important; }
      [dir="rtl"] .flex-row { flex-direction: row-reverse !important; }
    </style>
</head>
<body class="bg-[var(--blue-gray-50)]" dir="ltr"> 
<div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-[var(--blue-gray-200)] bg-white px-6 lg:px-10 py-4 shadow-md">
<div class="flex items-center gap-6 lg:gap-8">
<div class="flex items-center gap-3 text-[var(--blue-gray-800)]">
<span class="material-icons text-primary text-3xl">inventory_2</span>
<h1 class="text-[var(--blue-gray-800)] text-xl font-bold tracking-tight">EasyStock Pro</h1>
</div>
<nav class="hidden md:flex items-center gap-6 lg:gap-9">
<a class="text-[var(--blue-gray-600)] hover:text-primary text-sm font-medium leading-normal transition-colors" href="dashboard.html">Dashboard</a>
<a class="text-primary text-sm font-bold leading-normal border-b-2 border-primary pb-1" href="inventory-overview.html">Inventory</a>
<a class="text-[var(--blue-gray-600)] hover:text-primary text-sm font-medium leading-normal transition-colors" href="#">Orders</a>
<a class="text-[var(--blue-gray-600)] hover:text-primary text-sm font-medium leading-normal transition-colors" href="#">Shipments</a>
<a class="text-[var(--blue-gray-600)] hover:text-primary text-sm font-medium leading-normal transition-colors" href="#">Reports</a>
</nav>
</div>
<div class="flex items-center gap-4 lg:gap-6">
<div class="relative hidden sm:block">
<span class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-[var(--blue-gray-400)]">search</span>
<input class="form-input w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[var(--blue-gray-800)] focus:outline-none focus:ring-2 focus:ring-primary border border-[var(--blue-gray-300)] bg-white h-10 placeholder:text-[var(--blue-gray-400)] pl-10 pr-3 text-sm" placeholder="Search..." value="" id="headerSearch"/>
</div>
<button class="p-2 rounded-full hover:bg-[var(--blue-gray-100)] text-[var(--blue-gray-600)] hover:text-primary transition-colors">
<span class="material-icons">notifications</span>
</button>
<button class="p-2 rounded-full hover:bg-[var(--blue-gray-100)] text-[var(--blue-gray-600)] hover:text-primary transition-colors md:hidden" id="mobileMenuToggle">
<span class="material-icons">menu</span> 
</button>
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-[var(--blue-gray-200)]" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBSxpt4pVybfS4O-0ULf6S_d-Nr9KjLmx7svqOYY2zqzO3GhgweBsAcyp40CEl0IpyKcpmJ5jTBY2DroImBgZslP-O8OJ2W24x3Ixr-7rgiSBxdV6L0XQPB0rIxNZGSD371uW2GSSfZg8DE4G8xEIQjADvilYxtTlsDCuCnC0uc9EdCg1pGZS3dRpRgUZbkDvOhXCX2l8HR5lxq-fXc5hYU0SbeUNASQeAayTZZyeEecbiEKa5hLccrB4FhapGAyEuU54_1l5MWEeqD");'></div>
<button class="p-2 rounded-full hover:bg-[var(--blue-gray-100)] text-[var(--blue-gray-600)] hover:text-primary transition-colors" id="rtl-toggle">
<span class="material-icons">language</span>
</button>
<button onclick="window.location.href='logout.html'" class="p-2 rounded-full hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors" title="Logout">
<span class="material-icons">logout</span>
</button>
</div>
</header>
<main class="flex-1 px-4 sm:px-6 lg:px-10 py-6 lg:py-8">
<div class="max-w-7xl mx-auto">
<div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
<div>
<h2 class="text-[var(--blue-gray-900)] text-2xl sm:text-3xl font-semibold">Inventory Overview</h2>
<p class="text-[var(--blue-gray-600)] text-sm mt-1">Manage and track all items currently in stock.</p>
</div>
<button onclick="window.location.href='add-item.html'" class="flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-primary text-white text-sm font-medium shadow-md hover:bg-opacity-90 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
<span class="material-icons text-lg">add</span>
                Add New Item
              </button>
</div>
<div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg mb-6 filter-container">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
<div class="relative">
<span class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-[var(--blue-gray-400)]">search</span>
<input class="form-input w-full pl-10 pr-3 py-2.5 rounded-lg border border-[var(--blue-gray-300)] focus:ring-primary focus:border-primary text-sm text-[var(--blue-gray-700)] placeholder-[var(--blue-gray-400)] search-input" placeholder="Search by name or SKU" value="" id="searchInput"/>
</div>
<div>
<select class="form-select w-full py-2.5 rounded-lg border border-[var(--blue-gray-300)] focus:ring-primary focus:border-primary text-sm text-[var(--blue-gray-700)]" id="categoryFilter">
<option value="">All Categories</option>
<option>Cleaning Supplies</option>
<option>Apparel</option>
<option>Stationery</option>
<option>Personal Care</option>
<option>Electronics</option>
</select>
</div>
<div>
<select class="form-select w-full py-2.5 rounded-lg border border-[var(--blue-gray-300)] focus:ring-primary focus:border-primary text-sm text-[var(--blue-gray-700)]" id="supplierFilter">
<option value="">All Suppliers</option>
<option>GreenClean Inc.</option>
<option>EcoThreads Co.</option>
<option>Sustainable Supplies Ltd.</option>
<option>Nature's Choice</option>
<option>SunTech Innovations</option>
</select>
</div>
<div>
<select class="form-select w-full py-2.5 rounded-lg border border-[var(--blue-gray-300)] focus:ring-primary focus:border-primary text-sm text-[var(--blue-gray-700)]" id="stockFilter">
<option value="">All Stock Statuses</option>
<option>In Stock</option>
<option>Low Stock</option>
<option>Out of Stock</option>
</select>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-lg overflow-x-auto @container">
<table class="w-full min-w-[1024px]" id="inventoryTable">
<thead class="bg-[var(--blue-gray-50)]">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-item-name">Item Name</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-sku">SKU</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-category">Category</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-supplier">Supplier</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-quantity">Stock Qty</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-reorder">Reorder Pt.</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider table-column-updated">Last Updated</th>
<th class="px-4 py-3 text-left text-xs font-medium text-[var(--blue-gray-600)] uppercase tracking-wider">Actions</th>
</tr>
</thead>
<tbody class="divide-y divide-[var(--blue-gray-200)]" id="tableBody">
<!-- Table rows will be populated by JavaScript -->
</tbody>
</table>
<style>@container (max-width: 1024px) {
                  .table-column-supplier, .table-column-reorder, .table-column-updated { display: none; }
                }
                @container (max-width: 768px) {
                  .table-column-category, .table-column-sku { display: none; }
                }
                 @container (max-width: 480px) {
                  .table-column-quantity { display: none; }
                }
              </style>
</div>
<div class="mt-6 flex flex-col sm:flex-row justify-between items-center gap-4">
<div class="text-sm text-[var(--blue-gray-600)]" id="paginationInfo">
Showing <span id="showingStart">1</span> to <span id="showingEnd">5</span> of <span id="totalItems">0</span> entries
</div>
<div class="flex items-center gap-1" id="paginationControls">
<button class="p-2 rounded-md hover:bg-[var(--blue-gray-100)] text-[var(--blue-gray-500)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors" id="prevBtn" onclick="changePage('prev')">
<span class="material-icons text-xl">chevron_left</span>
</button>
<div id="pageNumbers" class="flex items-center gap-1">
<!-- Page numbers will be generated dynamically -->
</div>
<button class="p-2 rounded-md hover:bg-[var(--blue-gray-100)] text-[var(--blue-gray-500)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors" id="nextBtn" onclick="changePage('next')">
<span class="material-icons text-xl">chevron_right</span>
</button>
</div>
<div class="flex items-center gap-2">
<label class="text-sm text-[var(--blue-gray-600)]">Items per page:</label>
<select id="itemsPerPageSelect" class="text-sm border border-[var(--blue-gray-300)] rounded px-2 py-1 bg-white" onchange="changeItemsPerPage()">
<option value="5">5</option>
<option value="10" selected>10</option>
<option value="25">25</option>
<option value="50">50</option>
</select>
</div>
</div>
</div>
</main>
<footer class="py-6 text-center border-t border-[var(--blue-gray-200)] bg-white">
<p class="text-[var(--blue-gray-600)] text-sm">© 2024 EasyStock Pro. All rights reserved.</p>
</footer>
</div>
</div>
<script>
      // تحميل نظام إدارة البيانات
      const dataScript = document.createElement('script');
      dataScript.src = 'js/data-manager.js';
      document.head.appendChild(dataScript);

      // تحميل نظام الإشعارات
      const notificationScript = document.createElement('script');
      notificationScript.src = 'js/notifications.js';
      document.head.appendChild(notificationScript);

      let filteredData = [];
      let currentPage = 1;
      let itemsPerPage = 10;
      let totalPages = 1;

      dataScript.onload = function() {
        // التحقق من تسجيل الدخول
        const currentUser = dataManager.getCurrentUser();
        if (!currentUser) {
          window.location.href = 'login.html';
          return;
        }

        // تحميل البيانات الحقيقية
        loadInventoryData();

        // تحديث الفلاتر
        updateFilters();

        // إعداد مستمعي الأحداث
        setupEventListeners();

        // تحديث الإشعارات عند تحميل نظام الإشعارات
        notificationScript.onload = function() {
          // ربط زر الإشعارات
          const notificationBtn = document.querySelector('button:has(.material-icons:contains("notifications"))');
          if (notificationBtn) {
            notificationBtn.addEventListener('click', (e) => {
              e.preventDefault();
              notificationSystem.showNotificationPanel();
            });
          }
        };
      };

      // تحميل بيانات المخزون
      function loadInventoryData() {
        const products = dataManager.getProducts();
        filteredData = products.map(product => ({
          ...product,
          status: getStockStatus(product),
          lastUpdated: new Date(product.updatedAt).toLocaleDateString()
        }));

        renderTable();
      }

      // Function to determine stock status
      function getStockStatus(item) {
        if (item.quantity === 0) return 'out-of-stock';
        if (item.quantity <= item.reorderPoint) return 'low-stock';
        return 'in-stock';
      }

      // Function to get status badge
      function getStatusBadge(status) {
        const badges = {
          'in-stock': '<span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">In Stock</span>',
          'low-stock': '<span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">Low Stock</span>',
          'out-of-stock': '<span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">Out of Stock</span>'
        };
        return badges[status] || badges['in-stock'];
      }

      // Function to render table with loading state
      function renderTable() {
        const tableBody = document.getElementById('tableBody');

        // Show loading state
        tableBody.innerHTML = `
          <tr>
            <td colspan="8" class="px-4 py-8 text-center">
              <div class="flex items-center justify-center gap-2">
                <span class="material-icons animate-spin text-primary">refresh</span>
                <span class="text-[var(--blue-gray-600)]">Loading...</span>
              </div>
            </td>
          </tr>
        `;

        // Simulate loading delay for better UX
        setTimeout(() => {
          const startIndex = (currentPage - 1) * itemsPerPage;
          const endIndex = startIndex + itemsPerPage;
          const pageData = filteredData.slice(startIndex, endIndex);

          if (pageData.length === 0) {
            tableBody.innerHTML = `
              <tr>
                <td colspan="8" class="px-4 py-8 text-center text-[var(--blue-gray-500)]">
                  <div class="flex flex-col items-center gap-2">
                    <span class="material-icons text-4xl">inventory_2</span>
                    <span>No products found</span>
                  </div>
                </td>
              </tr>
            `;
          } else {
            tableBody.innerHTML = pageData.map(item => `
              <tr class="hover:bg-[var(--blue-gray-50)] transition-colors animate-fadeIn">
                <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-[var(--blue-gray-900)] table-column-item-name">${item.name}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-[var(--blue-gray-700)] table-column-sku">${item.sku}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-[var(--blue-gray-700)] table-column-category">${item.category}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-[var(--blue-gray-700)] table-column-supplier">${item.supplier}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-[var(--blue-gray-700)] table-column-quantity">
                  <span class="font-semibold ${item.quantity <= item.reorderPoint ? 'text-red-600' : 'text-green-600'}">${item.quantity}</span>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-[var(--blue-gray-700)] table-column-reorder">${item.reorderPoint}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-[var(--blue-gray-700)] table-column-updated">${item.lastUpdated}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm">
                  <div class="flex items-center gap-1">
                    <button class="text-primary hover:text-opacity-80 p-1 rounded hover:bg-blue-50 transition-colors" onclick="editItem(${item.id})" title="Edit Product">
                      <span class="material-icons text-lg">edit</span>
                    </button>
                    <button class="text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50 transition-colors" onclick="deleteItem(${item.id})" title="Delete Product">
                      <span class="material-icons text-lg">delete</span>
                    </button>
                  </div>
                </td>
              </tr>
            `).join('');
          }

          // Update pagination info and controls
          updatePaginationInfo();
          updatePaginationControls();
        }, 300);
      }

      // Update pagination information
      function updatePaginationInfo() {
        const totalItems = filteredData.length;
        const startIndex = (currentPage - 1) * itemsPerPage;
        const showingStart = totalItems > 0 ? startIndex + 1 : 0;
        const showingEnd = Math.min(startIndex + itemsPerPage, totalItems);

        document.getElementById('showingStart').textContent = showingStart;
        document.getElementById('showingEnd').textContent = showingEnd;
        document.getElementById('totalItems').textContent = totalItems;
      }

      // Update pagination controls
      function updatePaginationControls() {
        const totalItems = filteredData.length;
        totalPages = Math.ceil(totalItems / itemsPerPage);

        // Update previous button
        const prevBtn = document.getElementById('prevBtn');
        prevBtn.disabled = currentPage <= 1;

        // Update next button
        const nextBtn = document.getElementById('nextBtn');
        nextBtn.disabled = currentPage >= totalPages;

        // Generate page numbers
        generatePageNumbers();
      }

      // Generate page number buttons
      function generatePageNumbers() {
        const pageNumbersContainer = document.getElementById('pageNumbers');
        pageNumbersContainer.innerHTML = '';

        if (totalPages <= 1) return;

        const maxVisiblePages = 5;
        let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

        // Adjust start page if we're near the end
        if (endPage - startPage < maxVisiblePages - 1) {
          startPage = Math.max(1, endPage - maxVisiblePages + 1);
        }

        // Add first page and ellipsis if needed
        if (startPage > 1) {
          pageNumbersContainer.appendChild(createPageButton(1));
          if (startPage > 2) {
            pageNumbersContainer.appendChild(createEllipsis());
          }
        }

        // Add visible page numbers
        for (let i = startPage; i <= endPage; i++) {
          pageNumbersContainer.appendChild(createPageButton(i));
        }

        // Add ellipsis and last page if needed
        if (endPage < totalPages) {
          if (endPage < totalPages - 1) {
            pageNumbersContainer.appendChild(createEllipsis());
          }
          pageNumbersContainer.appendChild(createPageButton(totalPages));
        }
      }

      // Create page button
      function createPageButton(pageNum) {
        const button = document.createElement('button');
        button.className = `px-3 py-1.5 text-sm rounded-md transition-colors ${
          pageNum === currentPage
            ? 'bg-primary text-white'
            : 'hover:bg-[var(--blue-gray-100)] text-[var(--blue-gray-700)]'
        }`;
        button.textContent = pageNum;
        button.onclick = () => goToPage(pageNum);
        return button;
      }

      // Create ellipsis
      function createEllipsis() {
        const span = document.createElement('span');
        span.className = 'px-2 py-1.5 text-sm text-[var(--blue-gray-500)]';
        span.textContent = '...';
        return span;
      }

      // Change page function
      function changePage(direction) {
        if (direction === 'prev' && currentPage > 1) {
          currentPage--;
        } else if (direction === 'next' && currentPage < totalPages) {
          currentPage++;
        }
        renderTable();
      }

      // Go to specific page
      function goToPage(pageNum) {
        if (pageNum >= 1 && pageNum <= totalPages && pageNum !== currentPage) {
          currentPage = pageNum;
          renderTable();
        }
      }

      // Change items per page
      function changeItemsPerPage() {
        const select = document.getElementById('itemsPerPageSelect');
        itemsPerPage = parseInt(select.value);
        currentPage = 1; // Reset to first page
        renderTable();
      }

      // تحديث الفلاتر بالبيانات الحقيقية
      function updateFilters() {
        const products = dataManager.getProducts();

        // تحديث فلتر الفئات
        const categories = [...new Set(products.map(p => p.category))];
        const categorySelect = document.getElementById('categoryFilter');
        categorySelect.innerHTML = '<option value="">All Categories</option>';
        categories.forEach(category => {
          const option = document.createElement('option');
          option.value = category;
          option.textContent = category;
          categorySelect.appendChild(option);
        });

        // تحديث فلتر الموردين
        const suppliers = [...new Set(products.map(p => p.supplier))];
        const supplierSelect = document.getElementById('supplierFilter');
        supplierSelect.innerHTML = '<option value="">All Suppliers</option>';
        suppliers.forEach(supplier => {
          const option = document.createElement('option');
          option.value = supplier;
          option.textContent = supplier;
          supplierSelect.appendChild(option);
        });
      }

      // إعداد مستمعي الأحداث
      function setupEventListeners() {
        document.getElementById('searchInput').addEventListener('input', applyFilters);
        document.getElementById('categoryFilter').addEventListener('change', applyFilters);
        document.getElementById('supplierFilter').addEventListener('change', applyFilters);
        document.getElementById('stockFilter').addEventListener('change', applyFilters);

        // RTL toggle
        document.getElementById('rtl-toggle').addEventListener('click', () => {
          document.body.dir = document.body.dir === 'rtl' ? 'ltr' : 'rtl';
        });
      }

      // Function to apply filters
      function applyFilters() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const categoryFilter = document.getElementById('categoryFilter').value;
        const supplierFilter = document.getElementById('supplierFilter').value;
        const stockFilter = document.getElementById('stockFilter').value;

        const allProducts = dataManager.getProducts();
        filteredData = allProducts.filter(item => {
          const matchesSearch = !searchTerm ||
            item.name.toLowerCase().includes(searchTerm) ||
            item.sku.toLowerCase().includes(searchTerm) ||
            item.supplier.toLowerCase().includes(searchTerm);

          const matchesCategory = !categoryFilter || item.category === categoryFilter;
          const matchesSupplier = !supplierFilter || item.supplier === supplierFilter;

          let matchesStock = true;
          if (stockFilter) {
            const status = getStockStatus(item);
            matchesStock = status === stockFilter.toLowerCase().replace(' ', '-');
          }

          return matchesSearch && matchesCategory && matchesSupplier && matchesStock;
        }).map(product => ({
          ...product,
          status: getStockStatus(product),
          lastUpdated: new Date(product.updatedAt).toLocaleDateString()
        }));

        currentPage = 1;
        renderTable();
      }

      // Action functions
      function editItem(id) {
        const item = dataManager.getProduct(id);
        if (item) {
          // فتح نافذة تعديل بسيطة
          const newQuantity = prompt(`تعديل كمية "${item.name}"\nالكمية الحالية: ${item.quantity}`, item.quantity);

          if (newQuantity !== null && !isNaN(newQuantity) && newQuantity >= 0) {
            const updatedProduct = dataManager.updateProduct(id, { quantity: parseInt(newQuantity) });
            if (updatedProduct) {
              // إرسال إشعار
              if (window.notificationSystem) {
                notificationSystem.notifyProductUpdated(updatedProduct);
              }

              showMessage(`تم تحديث كمية "${item.name}" إلى ${newQuantity}`, 'success');
              loadInventoryData(); // إعادة تحميل البيانات
            }
          }
        }
      }

      function deleteItem(id) {
        const item = dataManager.getProduct(id);
        if (item && confirm(`هل أنت متأكد من حذف "${item.name}"؟\nهذا الإجراء لا يمكن التراجع عنه.`)) {
          const productName = item.name;
          const deleted = dataManager.deleteProduct(id);
          if (deleted) {
            // إرسال إشعار
            if (window.notificationSystem) {
              notificationSystem.notifyProductDeleted(productName);
            }

            showMessage(`تم حذف "${productName}" بنجاح`, 'success');
            loadInventoryData(); // إعادة تحميل البيانات
          }
        }
      }

      // دالة عرض الرسائل
      function showMessage(message, type) {
        const existingMessage = document.querySelector('.inventory-message');
        if (existingMessage) {
          existingMessage.remove();
        }

        const messageDiv = document.createElement('div');
        messageDiv.className = `inventory-message fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${
          type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
        }`;
        messageDiv.innerHTML = `
          <div class="flex items-center gap-2">
            <span class="material-icons">${type === 'success' ? 'check_circle' : 'error'}</span>
            <span>${message}</span>
          </div>
        `;

        document.body.appendChild(messageDiv);

        setTimeout(() => {
          messageDiv.remove();
        }, 5000);
      }
    </script>

</body>
</html>
